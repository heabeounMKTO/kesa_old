import json 
import os
from CutLabel import labelCut
import yaml


class convertLabelme:
    def __init__(self,imgfolder, jsonList=None):
        self.jsonList = labelCut(imgfolder,None).lookForJson()
    
    def getLabels(self):
        labels_list = []
        for jsonfile in self.jsonList:
            jsonfile = json.load(open(jsonfile))
            for labels in jsonfile["shapes"]:
               labels_list.append(labels["label"])
        labels_list = list(dict.fromkeys(labels_list))
        labels_list = sorted(labels_list)
        return labels_list

    def writeLabelList(self):
        labels = self.getLabels()
        with open('labels.yaml', 'w') as file:
             yaml.dump(labels, file)



cv = convertLabelme("imgs").writeLabelList()
